<div class="panel" [ngClass]="{ pin: pinned, open: isOpened }">
  <div class="data-wrapper">
    <ng-container *ngIf="!isLoading">
      <dx-toolbar class="panel-toolbar">
        <dxi-item location="before">
          <span class="contact-name value">{{ role.name }}</span>
        </dxi-item>
        <dxi-item location="after" [visible]="isPinEnabled">
          <dx-button stylingMode="text" [icon]="pinned ? 'pin' : 'unpin'" (onClick)="onPinClick()"></dx-button>
        </dxi-item>
        <dxi-item location="after">
          <dx-button icon="close" stylingMode="text" (onClick)="onClosePanel()"></dx-button>
        </dxi-item>
      </dx-toolbar>

      <dx-scroll-view class="panel-scroll">
        <dx-validation-group>
          <div class="data-part border">
            <dx-form class="plain-styled-form" labelMode="floating" [class.view-mode]="!isEditing">
              <dxi-item itemType="group" [colCount]="2" cssClass="photo-row">
                <dxo-col-count-by-screen [xs]="2"></dxo-col-count-by-screen>

                <dxi-item itemType="group">
                  <dxi-item cssClass="accent">
                    <div *dxTemplate>
                      <form-textbox label="{{'Roles.Name' | translate }}" [(value)]="role.name" [isEditing]="isEditing"
                        width="300px"></form-textbox>
                    </div>
                  </dxi-item>

                  <dxi-item cssClass="accent">
                    <div *dxTemplate>
                      <form-textbox label="{{'Roles.Description' | translate }}" [(value)]="role.description"
                        [isEditing]="isEditing" width="300px"></form-textbox>
                    </div>
                  </dxi-item>
                </dxi-item>
              </dxi-item>

            </dx-form>
          </div>

          <div class="data-part data-part-toolbar border">
            <dx-toolbar>
              <dxi-item location="after" [visible]="!isEditing" *hasRole="resource.Roles+'.'+action.Delete">
                <dx-button text="{{'Roles.Delete' | translate }}" icon="trash" stylingMode="contained" type="danger"
                  (onClick)="deleteRole()">
                </dx-button>
              </dxi-item>
              <dxi-item location="after" [visible]="!isEditing" *hasRole="resource.Roles+'.'+action.Update">
                <dx-button text="{{'General.Edit' | translate }}" icon="edit" stylingMode="contained" type="default"
                  (onClick)="toggleEdit()">
                </dx-button>
              </dxi-item>
              <dxi-item location="after" [visible]="!isEditing" *hasRole="resource.Roles+'.'+action.Update">
                <dx-button text="{{'Roles.Authorities' | translate }}" stylingMode="outlined" type="normal"
                  (onClick)="addpermissions()">
                </dx-button>
              </dxi-item>
              
              <dxi-item location="after" locateInMenu="after" [visible]="isEditing" *hasRole="resource.Roles+'.'+action.Update">
                <dx-button text="{{'General.Save' | translate }}" icon="save" stylingMode="contained" type="default"
                  (onClick)="onSaveClick($event)">
                </dx-button>
              </dxi-item>
              <dxi-item location="after" locateInMenu="after" [visible]="isEditing" *hasRole="resource.Roles+'.'+action.Update">
                <dx-button text="{{'General.Cancel' | translate }}" stylingMode="outlined" type="normal"
                  (onClick)="toggleEdit()"></dx-button>
              </dxi-item> 
            </dx-toolbar>
          </div>
        </dx-validation-group>


      </dx-scroll-view>
    </ng-container>

    <dx-load-panel container=".panel" [width]="300" [visible]="isLoading" [showPane]="false"
      [position]="{ of: '.panel' }"></dx-load-panel>

    <form-popup [(visible)]="isRolePermissionsPopupOpened" (save)="onClickSavePermissions()"
      titleText="{{'Roles.Authorities' | translate }}" [width]="1200">
      <role-permissions *ngIf="isRolePermissionsPopupOpened" [id]="id"></role-permissions>
    </form-popup>

 
  </div>
</div>